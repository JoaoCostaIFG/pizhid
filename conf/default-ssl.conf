<IfModule mod_ssl.c>
        SetEnv PZ_CREDS_FILE /etc/piz_hid-creds
        SetEnv PZ_LOGIN_FILE /piz_hid-login/pass
        SetEnv PZ_VAULT_DIR /piz_hid-vault/

	<VirtualHost *:443>
		ServerAdmin webmaster@localhost

		DocumentRoot /var/www/html
		ErrorLog ${APACHE_LOG_DIR}/error.log
		CustomLog ${APACHE_LOG_DIR}/access.log combined

		#   A self-signed (snakeoil) certificate can be created by installing
		#   the ssl-cert package. See
		#   /usr/share/doc/apache2/README.Debian.gz for more info.
		#   If both key and certificate are stored in the same file, only the
		#   SSLCertificateFile directive is needed.
		SSLEngine on
		SSLCertificateFile	/etc/ssl/localcerts/pizhid.pem
		SSLCertificateKeyFile	/etc/ssl/localcerts/pizhid.key

		# enable HTTP/2, if available
		Protocols h2 http/1.1

		<FilesMatch "\.(cgi|shtml|phtml|php)$">
				SSLOptions +StdEnvVars
		</FilesMatch>
		<Directory /usr/lib/cgi-bin>
				SSLOptions +StdEnvVars
		</Directory>
	</VirtualHost>

	SSLProtocol             all -SSLv3 -TLSv1 -TLSv1.1
	SSLCipherSuite          ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384
	SSLHonorCipherOrder     off
	SSLSessionTickets       off

	SSLUseStapling On
	SSLStaplingCache "shmcb:logs/ssl_stapling(32768)"
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
